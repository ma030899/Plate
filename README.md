
目录
目录	II
摘要	1
Abstract	2
第一章 绪论	3
1.1 课题研究背景	3
1.2 课题研究意义	3
1.3 课题研究主要内容	4
1.4 组织结构	4
第二章 开发环境及技术介绍	5
2.1 开发环境	5
2.1.1 开发工具	5
2.1.2 开发环境	5
2.2主要技术	5
2.2.1 JavaEE技术领域	5
2.2.2 后端框架SSM	5
2.2.3 JSON技术	6
2.2.4 ECharts图表	6
2.2.5 Layui	6
2.2.6 项目构建	6
2.2.7 本章小结	6
第三章 系统需求分析	7
3.1 系统结构	7
3.2 业务需求概述	8
3.2.1 用户业务流程	8
3.2.1 工作人员业务流程	9
3.2.1 技术人员业务流程	10
3.2.1 管理员业务流程	10
3.3 功能需求	11
3.3.1 车牌识别	11
3.3.2 登录注册	12
3.3.3 用户预定车位	13
3.3.4 网站公告	14
3.3.5 车位车辆历史纪录	15
3.3.6 车辆数量统计	16
3.3.7 留言板	16
3.3.8 后台工作人员子系统	16
3.3.9 后台技术人员子系统	17
3.3.10 后台系统管理员	17
3.4 非功能需求	18
3.4.1 车牌识别效率	18
3.4.2 响应速度	18
3.4.3 容错处理	18
3.4.3 硬件限制	18
第四章 系统分析设计	19
4.1 总体功能设计	19
4.2 系统架构设计	19
4.3 数据库设计	19
4.3.1 设计步骤	19
4.3.2 数据库E-R模型	20
4.3.3 数据库表物理视图	20
4.4 功能设计	24
4.4.1 车牌识别	24
4.4.2 登录注册设计	25
4.4.3 用户预定车位出库设计	25
4.4.4 网站公告	26
4.4.5 车位车辆历史纪录	26
4.4.6 车辆数量统计设计	26
4.4.7 留言板设计	26
4.4.8 后台工作人员子系统	27
4.4.9 后台技术人员子系统	27
4.4.10 后台系统管理员	28
4.5 本章小结	28
第五章 系统功能实现	29
5.1 开发平台搭建	29
5.2 程序结构	29
5.2.1 后台程序结构	29
5.2.2 前后台界面结构	30
5.3 功能实现	30
5.3.1 车牌识别	30
5.3.2 登录注册	32
5.3.3 用户预定车位出库	33
5.3.4 网站公告	34
5.3.5车位车辆历史记录	34
5.3.6车辆数量统计	35
5.3.7留言板	35
5.3.8后台两大子系统与系统管理员	36
第六章 测试	37
6.1单元测试	37
6.2 测试总结	38
第七章 总结与展望	38
7.1总结	38
7.2展望	38
致谢	38
参考文献	39

 
摘要
车牌识别是一个触及图象处置、计算机神经网络技术多个范畴的课题。伴随着人们物质生活水平的提高，机动车也越来越广泛的成为人们的代步工具，尤其是各类新能源车的出现也衍生出了诸多的新能源车牌。这就给车辆交通和社会治安带来了很大挑战。迎面而来的就是对车牌的识别以及对车牌信息的管理。因为车牌信息的提取不止局限于一些简单的业务场景，在多种复杂场景下也应该达到这种效果。目前比较成熟的车牌识别系统都与高清摄像头结合，即使在不同天气条件和不同光线下都可以达到很高的识别效率。
在当代生活多样化的驱使下，根据车位管理工作需要，本文设计并实现了一个基于B/S架构并利用百度AI的OCR识别接口的Web车牌识别系统来适配于停车场车位场景。该系统主要实现了根据车位类型进行定位，用户自行选择何时车位来完成入库、出库、预定车位操作。为安全起见，用户离场后可以随时查看我们抓取到的他所预定车位的车辆情况，可以将抓取到的库中、出库、入库的车辆图片上传并识别，确保车辆情况。也可以留言给我们工作人员代操作，这样也有利于工作人员了解更多车主信息，如果有情况会及时回复。并且设计了会员模块来让用户充值，体验优先，占位优先。
另外设计了后台父级系统管理员位居最高权限来支撑整个系统。技术人员和工作人员两个子系统来辅助用户完成操作并贯彻到整个系统中，支撑系统运行。
关键字：车牌识别、车位管理、Web 
Abstract
License plate recognition is a subject that involves image processing, computer neural network technology and many other fields. With the improvement of people's material living standards, motor vehicles have become more and more widely used as a means of transportation, especially the emergence of various types of new energy vehicles has also derived a number of new energy license plates. This has brought great challenges to vehicle traffic and social security. Oncoming is the license plate recognition and license plate information management. Because the extraction of license plate information is not limited to some simple business scenarios, in a variety of complex scenarios should also achieve this effect. At present, the more mature license plate recognition system is combined with high-definition camera, even in different weather conditions and different light can achieve high recognition efficiency.
Driven by the diversity of contemporary life, according to the needs of parking space management, this paper designs and implements a Web license plate recognition system based on Browser/Server architecture and using Baidu AI OCR recognition interface to adapt to the parking space scene. The system mainly realizes the positioning according to the type of parking space, and users can choose when to complete the operation of entering, leaving and booking parking spaces. For the sake of safety, users can check the vehicle situation of his reserved parking space at any time after leaving the venue, upload and identify the vehicle pictures captured in, out and in the library, and ensure the vehicle situation. You can also leave a message to our staff to operate on their behalf, which is also conducive to the staff to learn more about the owner's information, if there is a situation will reply in time. And designed a membership module to allow users to recharge, experience priority, seat priority.
In addition, the background parent system administrator is in the highest authority to support the whole system.Technical personnel and staff two subsystems to assist users to complete the operation and throughout the entire system, support system operation.
[Keyword]: License Plate Recognition, Parking Space Management, Web
 
第一章 绪论
1.1 课题研究背景
背景：社会的发展进步带动着人们水平的提高，从以前的自行车、“11路”到现在的新能源汽车，越来越多的车公诸于世，各式各样的车牌也进入了人们的视野。与此同时就应运而生出了车牌识别技术，而Web端的车牌识别系统就是其中之一。而车牌识别一定要有所适配的场景，例如车辆主干道、停车场车位等。在车位管理过程中，涉及车位选择透明化、车主管理信息化、缴费自然合理化、车辆安全话，这样才有利于提高车位管理效率化，车牌识别则体现出了安全性。
国内现状：上世纪80年代初，国内就致力于对车牌识别系统的研究，由于技术有限、外界环境变化、不同光线角度和业务场景的影响并没有太好效果。发展至今，识别技术日趋成型，识别率和效率的提高也是显而易见的，但是成本不低。因为我国汽车车牌的特殊性，任何一种单一的识别技术都难以凑效。如果可以将当下的车辆检测、计算机视觉神经网络、人工智能技术结合，使系统汇集和泛化并应用到车位管理场景中，会更有意义。一种系统只能适配极少数场景、成本运营高、数据处理工作量大、不系统、不程序化、造成车位管理太过随意性。本系统设计的车牌识别系统可应用于大多数停车场车位管理中，有利于车辆信息化管理效率提高、安全监控提高。
范围：适用于各种停车场车位管理，车牌识别涵盖全国34个省市、颜色涵盖黄、绿（新能源、电动）、蓝，成本低廉，需要人手较少。
指导思想：坚持主体展示与特色展示相结合；坚持特点突出与系统相映衬；坚持人性化设计和现代化相结合的指导思想。
技术路线：系统基于B/S架构，运用JSP技术作为JAVA的脚本语言为我们提供了HTTP请求服务，依托数据库技术，利用JAVA的一些开源框架与JSP进行交互并部署于Tomact(Web应用服务器)来处理复杂的业务需求，进而开发系统。
1.2 课题研究意义
车牌识别技术算法是核心，算法的好坏和成熟影响着识别效率加准确度。早期的图像处理只是单纯的提升图像质量，现在则是为了实现图像数字化、图像转换、增强以及复杂场景的还原。
现在的车牌识别技术不得不说非常成熟，车辆抓拍、自动化、速度快、效率高、适应性强。但缺陷是只是单纯的识别，而没有数据统计以及对车牌信息的管理。本文阐述的Web端车牌识别系统应用在了停车场车位管理上。在车位管理过程中，车流量大就伴随着数据量大，系统很好的将车主信息、车辆信息、提供给用户的福利、车牌识别很好的结合。不仅提高了对数据的总结和统计，可以及时、准确、有效分配车位、监控车身情况，而且给新型车牌识别系统的衍生提供了新思路。对于我来说也是一种收获，将自己两年所学尽可能展示出来，为自己以后的职业生涯打好第一个垫脚石。
1.3 课题研究主要内容
主要以车牌识别技术和适配停车场车位管理场景为主，在此基础上，实现了用户预定车位、工作人员分配车位、技术人员同意分配车位以及出入库操作；另外实现了用户体验优先制（VIP服务）；懒人模块（在线留言）即如果用户想要了解自己预定车位和车的情况，可以留言给工作人员来代理操作，之后再由工作人员回复用户；网站公告可以让用户了解到更多基本信息和注意事项；实现了登录和注册功能来区分用户和相关管理人员；可以浏览停车场车位内外车辆详情；对境外车辆进行检索；对各个时间段内车牌颜色、境内外车辆数量进行可视化展示；总管理员可以支配整个系统并且查看收入情况。
1.4 组织结构
第一章：绪论，介绍本项目设计研究背景和意义，涵盖研究内容及适用场景。
第二章：开发环境及技术介绍，简略介绍开发所用工具和开发技术。
第三章：系统需求分析，概述业务流程，分析系统功能需求和非功能需求。
第四章：系统分析设计，在需求基础上，设计或者详细设计每一个功能模块。
第五章：系统功能实现，阐述实现这些功能模块的详细步骤、展示效果图及部分代码。
第六章：测试，采用黑盒测试对个别功能模块选择测试用例进行测试。
第七章：总结展望，总结系统所得经验和做的不好的地方，不忘初心，展望未来。


 
第二章 开发环境及技术介绍
2.1 开发环境
2.1.1 开发工具
1.后台代码编写：Eclipse
2.数据库：Mysql
3.界面编写：Visual Studio Code
4.数据库可视化界面：Navicat Premium
2.1.2 开发环境
提供开发者文档和编译环境：JDK(Java Development Kit-版本1.8)
Web应用服务器：Tomact-版本9.0
2.2主要技术
2.2.1 JavaEE技术领域
1.Servlet:运行在服务器上，在服务器端调用、执行，具有独立于平台和协议的特性，主要功能在于对客户端请求进行处理并返回响应。可以交互式浏览和生成数据，多数情况下用来拓展基于HTTP协议的Web服务器。
2.JSP(JavaServer Pages)：由Sun公司主导创建的一种动态网页技术标准。同样部署于网络服务器上，在响应客户端发送的请求后根据内容动态生成其他格式的Web网页并返回给请求者。
3.除此之外，还为我们提供了用来规范客户端程序如何来访问数据库的应用程序接口和多种后台组合框架等。
2.2.2 后端框架SSM
1.SSM框架由Spring、Spring中的SpringMVC模块和Mybatis整合而成作为数据源的Web项目框架。整体业务流程就是页面发送请求给控制器，控制器调用业务层处理逻辑，而Mybatis作为持久层框架则接收逻辑层的请求并通过与数据库交互，最后将结果返回给业务层，重新处理逻辑发送回控制器调用试图去展现数据。

为了提升系统的开发速度使系统更具扩展性和移植性，SSM组合框架所起到的作用不仅实现了模块与模块之间的解耦，同时让业务逻辑处理变得更清晰，是Web开发的不二之选。
2.其中Mybatis的PageHelper，是一款开源免费的第三方物理插件，插件中提供的多个参数可适配多种场景，给开发人员节省下大量时间。
2.2.3 JSON技术
JSON作为一种轻量级的数据交换格式与XML等复杂格式数据相比更便于解析。本系统所用的阿里巴巴FastJson工具处理包性更高、速度快，一定程度上提高了开发效率。
2.2.4 ECharts图表
Apache ECharts是一个JavaScript实现的开源可视化库，可流畅运行在PC端和移动设备上，并且兼容大多数浏览器。有点就在于图表美观、多种数据格式不需要转换就可以直接使用。本系统使用ECharts来做可视化统计也是一个亮点。
2.2.5 Layui

2.2.6 项目构建
Maven构建项目目录，将各模块代码、配置文件、测试文件、web相关文件、视图静态资源文件、jar包配置文件层次化，方便管理和查找。
2.2.7 本章小结
本章阐述的开发中集成的环境和工具都是日常所用，开发技术上用到的都是当下较为主流的开发技术，个人感觉javascript上功力薄弱，核心技术并没有真正掌握。另外对自己的UI设计不满意，都有待提升。项目中用到的jQuery并没有描述，经常在W3school和菜鸟教程上进行参考来应用于实际开发。
第三章 系统需求分析
3.1 系统结构
1.前台对登录用户和为登录用户做区分，登录用户可以查看停车场内各个类型车位，根据自身需求预定车位进行停车（出入库）；通过浏览网站信息公告来了解当下最新消息；实时查看预定和车位详情来确保自己车辆的安全；如有异样可以在留言板留言，等待工作人员回复。未注册用户另行注册来使用我们的系统，注册时需要注意信息填写完成准确。
 
图3-1 Web前台系统结构图
2.后台管理开放于工作人员、技术人员和系统管理员。
 
图3-2 Web后台系统结构图
3.用户预定车位过程中，需要通过工作人员和技术人员辅助来完成。
 
图3-3 Web用户预定车位流程图
3.2 业务需求概述
针对本文所设计的车牌识别系统应用于停车场车位管理场景。通过对部分停车场车位情况调研和分析，明确了用户的最大需求。停车场车位基于安全、效率、停车规范等，用户应该根据自身情况选择适合自己车辆的车位进行停车，并且做到预定车位、出入库一体化。安全方面选择调用百度AI的车牌识别接口来让用户可以实时上传抓拍的照片来了解自己车辆的情况。除此之外，开放了留言板在线留言功能，用户可以留言给我们后台工作人员帮助自己来查看车辆情况，施行会员政策来用户优先体验。
后台管理人员设计了工作人员、技术员、系统管理员三大模块。工作人员来辅助用户预定车位、出入库、查看用户留言及时回复、用户信息及会员充值服务，在协助用户查看车辆情况同时，可以浏览车位内车辆基本信息，境外车辆检索，关注各个区段车辆数量变化情况；技术员辅助工作人员完成车辆出入库认定；系统管理员对工作人员和技术人员名单进行处理，辅助车位管理和车怕识别失效管理，对网站公告进行实时推送，统计以日、月、车为单位的收入情况。
3.2.1 用户业务流程
用户未登录或者未注册进入系统时只可以浏览网站公告，查看所有车位情况。当用户登录系统后，可以进入预定车位操作，同时可以预定多个同类型或者不同类型的车位，也可以浏览自己的历史预定记录和当前预订情况。为确保私密信息泄露可以修改密码，入伍其他需求可以退出登录。另外可以将自己所遇到的问题在线留言给工作人员，也可留言让后台帮忙充值会员业务。处于安全考虑，用户可使用车牌识别技术来上传抓取到的车辆图片来查看自己车辆情况。
 
图3-3 用户业务流程用例图
3.2.1 工作人员业务流程
工作人员登录后台管理，工作人员用于辅助用户预定车位、处理用户留言问题、帮助用户充值续费会员业务等。
 
图3-4 工作人员业务流程用例图

3.2.1 技术人员业务流程
技术人员及时查看车辆状态，并且协助工作人员完成用户出库。
 
图3-5 技术人员业务流程用例图

3.2.1 管理员业务流程
系统管理员登录后台管理，在人员管理模块可以相应添加、修改、删除、浏览所有工作人员和技术人员信息；车位管理模块可以上架、更新、删除任何状态下的车位，并且对损坏车牌识别技术的车牌进行维修处理；网站首页公告栏信息模块管理员可以进行相关操作；除此之外，查看分别以车、日、月为单位统计收益情况。
 
图3-6 系统管理员业务流程用例图



3.3 功能需求
3.3.1 车牌识别
1.功能说明
车牌识别也是系统的核心功能，虽然向用户展示方法有限，但依然耗费大量时间去做数据解析、存储、字符串转换、效果展示。当用户上传图片后，通过请求网络接口，对车牌图片进行检测和字符提取等操作，并通过工具类处理得到我们所看到的数据。该功能主要出于用于车辆安全考虑，让用户上传抓取到的车位内车辆图片，通过最后识别结果来判断是否存在特殊情况。
2.流程图
 
图3-7 车牌识别流程图

3.3.2 登录注册

1.用户登录注册
	登录注册可以确保用户个人信息的私密性性，因为系统可能涉及到用户利益，所以有必要根据用户需求设计登录注册模块。
 
图3-8 用户注册流程图
 
图3-9 用户登录流程图

3.3.3 用户预定车位
1.功能说明：用户预定车位模块是系统的第二大核心模块，通过预定车位和识别抓拍到的车位内外车辆情况结合，才能将车牌识别应用于停车场车位管理场景。

2.预定车位活动图：
 

图3-10 用户预定车位活动图

3.3.4 网站公告
公告作为信息传播的一种方式，越来越让人们受益良多。让用户可以及时了解到网站的最新消息和更好的体验效果。公告由系统管理员统一发布和更新，用户可以根据当下情况查询最新消息，查看公告详情。
 
图3-10 网站公告浏览活动图

3.3.5 车位车辆历史纪录
对抓拍到的每一张图片，进行车牌号码、车牌颜色的提取以及车辆所在地的转换。工作人员可以根据条件进行搜索，浏览每张图片识别耗时。
 
图3-10 车位车辆历史纪录活动图

3.3.6 车辆数量统计
车牌数量统计分为两个部分。停车场车位分别有黄、蓝、绿车牌的车辆组成，当然也有特别污损未能识别的，分别对各个颜色的车牌车辆做数量统计，对各个时间段内省市的车牌进行数量统计。可视化图表由ECharts动态绘制，数据同步，可以流畅展示，其中包含折线图、柱状图、表格展示，卡顿可刷新。
3.3.7 留言板
留言板时根据用户实际情况设定的，用户如果对系统不满意、或者想充值会员业务，都可以通过留言板跟工作人员在线交流，工作人员会及时反馈给用户。
 
图3-11留言板活动图
3.3.8 后台工作人员子系统
1.功能说明：工作人员是与用户对接最多，辅助最多的后台人员。负责处理用户的预订车位、用户出库、留言回复、用户信息管理、会员业务、查看车位历史停车记录、车牌数量统计等。一定程度上不可或缺，满足用户懒人设计，代用户操作，与用户进行交流等需求。对所有下辖模块可进行二次操作，但是不能越过上级权限。
2.活动图：
 
图3-12工作人员子系统活动图
3.3.9 后台技术人员子系统
1.功能说明：技术人员负责在用户出库时完成车位状态修改以及是否需要缴纳车位维护费，和用户、工作人员紧密联系。
2.活动图：
 
图3-13技术人员子系统活动图
3.3.10 后台系统管理员
1.功能说明：系统管理员时支持整个系统的父级系统，单独对工作人员和技术管理人员进行二次操作（查看、更新、删除）。另外根据用户需求设计的分析管理员需求可添加车位、维修车位所装的“车牌识别”，对网站公告管理和整个系统收入情况汇总查看。
2.活动图：
 
图3-14父级系统管理员活动图
3.4 非功能需求
3.4.1 车牌识别效率
车牌识别算法调用外部接口，并非自己所写。网络环境状态良好、抓取图片规范情况下识别速度可控制在几百毫秒之内。
3.4.2 响应速度
页面加载、响应做到用户体验良好、不让用户抱怨。今后优化中会朝页面内部优化、启用缓存、网络连接优化。
3.4.3 容错处理
当用户操作出错时，系统给出友好提示，用户重新下达指令。
3.4.3 硬件限制
1.本系统涉及到抓拍图片，因为没有摄像头采取结合，所以照片都从现实场景中提取。
2.支持当下主流PC端操作系统。


























第四章 系统分析设计
4.1 总体功能设计
通过第三章的功能需求分析，Web端主要设计了以下几个功能模块。
 
图4-1 系统整体功能设计框架图
4.2 系统架构设计
4.3 数据库设计
数据库设计是根据用户及系统实际需求而不可或缺得重要环节。根据数据库设计原则设计出满足基本表四大特性，使表结构相对稳定、派生出所需要的数据，正确处理表多对多和一对多关系、建立连接关系时充分使用主键和外键。做到需求大于表结构。
4.3.1 设计步骤
1.需求分析：通过调查和分析，在明确需求同时了解用户业务活动，画出每一个实体得基本属性。
2.概念结构设计：通过E-R图将单个或者多个实体的关系展示。
3逻辑结构设计：将E-R图转换为逻辑模型。
4.物理结构设计：利用数据库提供的存储结构方法构想出合理的物理结构来更好映射数据之间的关系。
5.数据库实施：选取一些实用性的数据来验证数据库设计是否规范。
6.维护：数据库正式和系统并行使用时，如果发现问题，及时更正。
4.3.2 数据库E-R模型
4.3.3 数据库表物理视图
1.人员表(m_admin)：用来存储用户、系统管理员、工作人员、技术员信息等。
 
图4-3 用户表截图
2.车牌信息存储表(m_car)：用来存放识别的车牌号码、车牌颜色、以及各类颜色的车牌数量。
 
图4-4 识别车牌信息存储表截图
3.车位信息存储表(m_parkingplace)：
 
图4-5 车位信息存储表截图
4.车牌颜色数量统计表(m_color):
 
图4-6车牌颜色数量统计表截图
5.公告表(m_gonggao):存放公告标题、内容、公告添加时间。
 
图4-7公告表截图
6.车位分配记录表(m_jilu):其中四个外键分别关联车位信息、用户预定车位以及辅助用户的工作人员和技术人员。
 
图4-8车位分配记录表截图
7.留言表(m_liuyan):存放用户反馈信息和于工作人员交流的基础表，用kehuid和workid将三表关联。
 
图4-9留言表截图
8.图片表(m_img):
 
图4-10图片表截图
9.车辆数量表(m_provice):根据车牌转换的车辆所在地统计几个热门城市的车辆数量。
 
图4-11车辆数量表截图
10.日收入表(m_day):
 
图4-12日收入表截图

11.月收入表(m_month):
 
图4-13月收入表截图
12.用户上传抓拍图片表(m_user)
 
图4-14用户上传抓拍图片表截图
13.会员表(m_vip):
 
图4-15会员表截图
14.预定车位表(m_book)：其中kehuid、carid、workid三个外键将四张表关联，完成预定车位及出库。
 
图4-16预定车位表截图
4.4 功能设计
4.4.1 车牌识别
1.简述：当用户想了解自己车辆情况时，可以上传抓拍到的车位内外的车辆图片，系统识别来确认车位中是否是自己的车。同样对于工作人员也可以通过车牌检测来判断车辆是否按章停车。
2.时序图：
 
图4-17 车牌识别时序图
4.4.2 登录注册设计
1.简述：登录注册是基于系统开放和用户私密信息保护而设计的，未注册不可以登录，也就不可以使用系统全部功能。用JavaScript做注册登录拦截，即判断注册登录时必填内容不可为空，格式校验等。
2.时序图
 
图4-18 登录注册时序图
4.4.3 用户预定车位出库设计
1.简述：用户预定车位应先行登录按照自己需要、车辆类型来选择合适车位类型，在预定过程中，工作人员来辅助并给用户分配车位，当用户需要完成出库操作时，则需要工作人员和技术人员合作协助用户完成，做到一体化。
2.时序图
 
图4-19 用户预定车位出库时序图
4.4.4 网站公告
简述：网站公告实则是为了丰富系统功能而加的模块，由系统管理员操作公告更新。公告由标题、内容、发布时间三部分组成，最新公告应显示在最显眼的地方，这样才能让用户最早最快看到最新消息。
4.4.5 车位车辆历史纪录
简述：该模块开放与后台人员，将抓拍到的图片识别后进行数据管理。
详细设计阐述：将请求接口识别到的车牌JSON数据通过FastJsonUtil解析，使用迭代器Iterator遍历车牌组合。通过ColorUtil和ProviceUtil中的正则方法将车牌颜色和车牌前两位分别转换位中文颜色和车辆对应所在地，期间用currentTimeMills()来计算识别所需时间。
4.4.6 车辆数量统计设计
简述：该模块方便后台人员查看各时间段、各省市、各车牌颜色的数量变化。
4.4.7 留言板设计
1.简述：留言板是目前最为广泛的一种交流方式，可以征求用户意见、提升办事效率、信息传递效率提高。
2.详细设计：题设计体现了用户留言的针对性，内容则是为了让用户充分发言，最新留言置顶可以让用户最先看到是否回复。用户留言首先需要登录，之后点击我的留言进入留言页面，点击在线留言即调用后台liuyanAd2()方法，添加标题和内容后提交，此时可以等待后台工作人员回复，也可以点击删除后台调用liuyanDelete()删除。后台工作人员在待处理留言页面可看到用户留言选择进行回复操作，即后台调用liuyanUpdate()。
3.时序图：
 
图4-20留言板时序图
4.4.8 后台工作人员子系统
1.简述：辅助用户的子系统。
2.详细设计：工作人员登录进入所属管理页面，点击预定车位/入库弹出树型菜单，可查看待处理的用户预定请求页面，处理完成后则查看已处理预定；点击车辆出库弹出树型菜单，用户出库时需由工作人员提交车位情况给技术人员，技术人员审核后确认用户支付车位情况，整个出库环节结束；点击留言管理弹出的菜单栏进入相应页面可回复用户留言并且查看留言详细情况；点击客户信息查询可查看每位用户基本信息。会员管理模块可以帮用户充值，续费VIP业务；车牌信息树型菜单下时根据用户上传抓拍图片结合车牌识别所得到的境内外车辆数量统计和车位使用历史纪录。
4.4.9 后台技术人员子系统
1.简述：协同工作人员完成出库同时提交车位损坏情况。
2.详细设计：技术人员可查看经办的车辆出库、车位情况，可根据车位号等关键字进行检索提高效率。车辆出库需技术人员确认，若车位损坏可给出赔偿金让用户支付，若无特殊情况直接确认。
4.4.10 后台系统管理员
1.简述：建立在技术人员、工作人员之上的父级系统，同时权限最高，不可逾越。
2.详细设计：在系统管理员界面分五个树型菜单，其一对工作人员和技术人员进行管理，有权删除现存后台人员，也可以添加新人；其二可根据用户反馈增加车位、删除车位、及时更新车位信息；其三对网站公告实时更新；其四更换车位相关图片；其五可查看系统单日收入，每月收入，相关车位收入情况。
4.5 本章小结
	



 
第五章 系统功能实现
5.1 开发平台搭建

5.2 程序结构
5.2.1 后台程序结构
1.说明：java目录下是后台所用工具类、相关接口代码。resources资源文件夹下存放系统配置文件，包括数据库连接池配置、后台框架配置、日志打印配置、mapper目录下的Mybatis映射文件配置。
2.结构图
  
图5-1 后台程序结构图

5.2.2 前后台界面结构
1.说明：系统界面统一均套用所写JSP模板。WEB-INF同级目录下JSP页面为系统首页模板，uploads文件夹存放上传图片，static文件夹存放layui和ECharts资源文件，manage文件夹存放后台页面模板，WEB-INF目录下存放所有Web页面。
2.结构图：
  
图5-2 前后台界面结构图
5.3 功能实现
5.3.1 车牌识别
1.详细实现：用户或者工作人员查看车位车辆情况，上传抓拍图片系统识别。首先选择上传图片，即后台调用封装操作文件方法GetFileUtil()通过接口上传，获取该图片路径请求百度接口即调用PlateUtil()进行识别，将识别所获的JSON格式数据通过FastJsonUtil()解析，最终完成车牌识别功能，用户查看详情。
GetFileUtil()中调用百度接口服务时必须事先引入依赖，在百度智能云-管理中心创建自己的应用，创建应用所得到的APPID、APPKEY、SECRETKEY来支持请求接口。请求参数选择检测多张车牌，值设置为TRUE，最后字节流读取格式为二进制的图片路径。
2.结果组合图：
 
图5-2 车牌识别结果组合图
3.主要代码：
public static String GetResult(String path) throws IOException {
		AipOcr client = new AipOcr(APP_ID, API_KEY, SECRET_KEY);
		System.setProperty("aip.log4j.conf", "path/to/your/log4j.properties");
		long startTime=System.currentTimeMillis();
		HashMap<String, String> options = new HashMap<String, String>();
		options.put("multi_detect", "true"); 	
		JSONObject res = client.plateLicense(path, options);
		byte[] file = Util.readFileByBytes(path);
		res = client.plateLicense(file, options);
		System.out.println(res.toString(2));
		long endTime=System.currentTimeMillis(); 
		 carTime=endTime-startTime;
		System.out.println("识别耗时： "+(carTime)+"ms");
		System.out.println(FastJsonUtil.GetCarResult(res.toString(2)));/
		return path;

	}

5.3.2 登录注册
1.详细实现：登录注册分为用户登录注册和后台（工作人员、技术人员、系统管理员）登录，做权限区分。用户注册全部为必填字段，格式校验密码、身份证号码、手机号码等，用户登录时填写用户名密码调用接口与数据库验证。后台登录选择正+-确角色，同样输入用户名密码请求接口查询数据库进行校验，达到身份验证效果，并返回数据弹出框提示。用户登录成功可使用系统全部功能，后台人员登录各司其职。进行辅助用户和数据信息管理操作。
2.效果图
 
图5-2 登录注册效果图
 

5.3.3 用户预定车位出库
1.详细实现：用户预定车位即跳转登录页面-后台调用Login()，如果用户在之前就已登录则可点击所有车位进行选择性预定，可以查看预定详情、车位详情并适用车牌识别来识别自己预定车位中抓拍到的车辆图片。预定车位后等待后台工作人员确认分配车位。自行出库时由工作人员和技术员操作后台车位，修改车位情况及车位支付款，车位维护费另行结算。
2.代码功能模块说明图：
 
图5-3 用户预定车位代码模块说明图
3.效果图：
 
图5-4 车位列表图
 
图5-5 车位列表详情图
 
图5-6 我的预定车位及详情效果图

5.3.4 网站公告
1.详细实现：将标题、内容、发布时间罗列按时间最先显示，重点级别低的公告将被删除。调用selectBeanList()显示在主页，由系统管理员不固定时间发布。
2.代码功能模块说明图：
 
图5-7 网站公告模块代码说明图
3.效果图：
  
图5-8 网站公告及详情效果图
5.3.5车位车辆历史记录
1.详细实现：根据车牌识别功能所得到的车牌颜色、车牌号（车牌颜色是英文）转换成中文以及车辆所在地。调用BriefCityUtil类中SubStringSecond()获取车牌号码前两位是转换关键，之后传入Plate()中遍历车牌前两位与省市所在地使其对应，最终得到车牌相对的省份或市区。获取数量上均采取正则类Pattern和Matcher来匹配字符串任意位置累计次数来统计。
2.代码功能模块说明图：
 
	图5-9 历史纪录代码模块图
5.3.6车辆数量统计
1.详细实现：利用数据可视化工具ECharts将同步到的数据（识别抓拍车辆图片所得数据数量）流畅展示。为图表展示准备一个父级容器来初始化实例。引入juqery.js和echarts.js，接着制定图表的配置项，对所用到的属性和元素进行简单配置和美化，定义数组与后台交互取得数据，遍历数组后调用setOption方法加载数据。最后看到数量相关的折线图、柱状图等。方便工作人员直观的看到各个时间段内外来车和不同种类车的数量变化情况。
2.效果图：
  
图5-10 车辆数量统计图
5.3.7留言板
1.详细实现：用户点击留言板可在线留言以反馈问题，逻辑上分为留言内容处理（用户留言相对工作人员回复留言），留言状态（留言已回复未回复）。用户点击我的留言跳转留言板页面进行在线留言，或者让工作人员代操作来检测自己车位内车辆情况，可查看留言记录删除记录，工作人员处理用户留言代用户操作完成后反馈给用户。
2.代码功能模块说明图：
 
图5-11 留言代码模块说明图
1.	效果图：
 
图5-12 留言板效果图
5.3.8后台两大子系统与系统管理员
1.说明：后台布局因为均采用统一界面风格和接口，所以整合介绍。
2.详细实现：后台界面均由Layui提供，界面统一，树形菜单由JS脚本编写，后台接口实现主要包括，修改密码接口、退出后台接口、各模块添加接口、删除接口、更新接口、详情接口、根据关键字检索接口以及相关的加减乘除、小数点精确保留、四舍五入算法的融入等。
3.主要代码：
<SCRIPT language=javascript>
	function expand(el)
	{childObj = document.getElementById("child" + el);
		if (childObj.style.display == 'none')
		{childObj.style.display = 'block';
		}else{childObj.style.display = 'none';
		}
		return;
	}
</SCRIPT>

4.效果图：
 
图5-14后台管理效果图
第六章 测试
6.1单元测试
采用黑盒测试进行系统功能测试
 
图6-1系统功能黑盒测试截图
6.2 测试总结
运用多种测试用例对各功能模块进行测试，测试数据范围广，代码区分理解模块化，证明系统由良好的容错率和适用性。
第七章 总结与展望
7.1总结
利用调查分析得到的用户需求，针对用户需求展开对系统的详细设计和实现，成功将车牌识别适配于停车场车位管理场景中。该车牌识别系统基于主流后台SSM框架，界面设计统一采用Layui，项目目录管理管理采用Maven，提交Git进行托管和备份。
系统设计利用MVC设计模式，让代码层次化和模块具体化。调用当下成形车牌识别技术完成设计，最初打算采用OpenCV来作为车牌识别核心算法，但电脑性能远远不足以支撑整个算法，降低效率的同时给自己带来了很大影响，最终放弃使用。
另外整个开发过程让我认识到了每一步都不可或缺，分析需求明确用户目的是根本，设计是整体基调，实现是核心，必须按照软件设计的步骤逐步展开，才能事半功倍。在代码编写过程中领悟到了编写规范和添加注释的重要性，不仅要让自己看懂，条例要清晰，结构要合理，那么别人也能理解。
开发中也遇到了很多问题，印象最深的就是转车辆所在地这一块，想到过用Map，但是最后还是选择了字符串数组，过程繁琐。让我认识到了要做什么规划很重要，如果只是无目的性的设计，最终只会打乱头绪，经验的欠缺使细节优化做的不到位。
在车牌识别系统开发设计过程中，我体会到了软件开发的不易和带来的乐趣，可能问题很多，如果不尝试去解决下次还是这样。在阅读理解软件设计六大原则上还有一定的欠缺，同时这个行业还有很多值得我去探索的位值领域和深入挖掘的已知领域，自己所掌握的不过冰山一角，和真正的软件设计差的不止一点，这也是我要努力的方向。
7.2展望
项目开发存在的问题也就暴漏了缺点，系统还有较多不合理的地方，如：
1)	登录注册密码未加密；
2)	前台界面较丑；
3)	未融入摄像头等硬件来抓拍图片；
4)	核心算法效率未达到预期目的；
对以上问题后期会尽己所能逐一解决，更新迭代系统，是系统功能更完成，性能优化更良好。除此之外，认识到了软件技术领域范畴之广，让我的兴趣又提升到了一个新的节点，今后将以更积极的态度对待。
致谢



